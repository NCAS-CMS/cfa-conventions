<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. CFA-netCDF properties</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="" href="index.html" />
    <link rel="prev" title="3. The CFA-netCDF conventions" href="cfa.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="cfa.html" title="3. The CFA-netCDF conventions"
             accesskey="P">previous</a> |</li>
  <li><a href="index.html">CFA</a>
      <select onchange="location = this.options[this.selectedIndex].value;">
  <option value="../0.3/index.html"selected>0.3
  <option value="../0.2.2/index.html">0.2.2
  <option value="../0.2.1/index.html">0.2.1
  <option value="../0.2/index.html">0.2
  <option value="../0.1/index.html">0.1
  </select>
  </li>

  
        <li><a href="index.html"></a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="cfa-netcdf-properties">
<span id="cfa-ref"></span><h1>4. CFA-netCDF properties<a class="headerlink" href="#cfa-netcdf-properties" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="28%" />
<col width="27%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">netCDF  properties</th>
<th class="head">cfa_array attributes</th>
<th class="head">Partitions attributes</th>
<th class="head">subarray attributes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#cf-role"><em>cf_role</em></a>,
<a class="reference internal" href="#cfa-dimensions"><em>cfa_dimensions</em></a>,
<a class="reference internal" href="#cfa-array"><em>cfa_array</em></a></td>
<td><a class="reference internal" href="#directions"><em>directions</em></a>,
<a class="reference internal" href="#pmdimensions"><em>pmdimensions</em></a>,
<a class="reference internal" href="#pmdimensions"><em>pmdimensions</em></a>,
<a class="reference internal" href="#pmshape"><em>pmshape</em></a>,
<a class="reference internal" href="#base"><em>base</em></a>,
<a class="reference internal" href="#partitions"><em>Partitions</em></a>,</td>
<td><a class="reference internal" href="#index"><em>index</em></a>,
<a class="reference internal" href="#location"><em>location</em></a>,
<a class="reference internal" href="#pdimensions"><em>pdimensions</em></a>,
<a class="reference internal" href="#pdirections"><em>pdirections</em></a>,
<a class="reference internal" href="#format"><em>format</em></a>,
<a class="reference internal" href="#punits"><em>punits</em></a>,
<a class="reference internal" href="#pcalendar"><em>pcalendar</em></a>,
<a class="reference internal" href="#part"><em>part</em></a>,
<a class="reference internal" href="#subarray"><em>subarray</em></a></td>
<td><a class="reference internal" href="#shape"><em>shape</em></a>,
<a class="reference internal" href="#file"><em>file</em></a>,
<a class="reference internal" href="#dtype"><em>dtype</em></a>,
<a class="reference internal" href="#ncvar"><em>ncvar</em></a>,
<a class="reference internal" href="#varid"><em>varid</em></a>,
<a class="reference internal" href="#file-offset"><em>file_offset</em></a>,
<a class="reference internal" href="#scale-factor"><em>scale_factor</em></a>,
<a class="reference internal" href="#add-offset"><em>add_offset</em></a>,
<a class="reference internal" href="#lbpack"><em>lbpack</em></a>,
<a class="reference internal" href="#endian"><em>endian</em></a>,
<em class="xref std std-ref">_FillValue</em></td>
</tr>
</tbody>
</table>
<div class="section" id="cf-role">
<span id="id1"></span><h2>4.1. cf_role<a class="headerlink" href="#cf-role" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">cf_role</span></tt></dt>
<dd><p class="first">This standard CF property <em>must</em> be used to mark the netCDF
variable as either an <a class="reference internal" href="cfa.html#cfa-variable"><em>CFA variable</em></a> or a
<a class="reference internal" href="cfa.html#cfa-private-variable"><em>CFA private variable</em></a>.</p>
<p>It takes values of <tt class="docutils literal"><span class="pre">&quot;cfa_variable&quot;</span></tt> or <tt class="docutils literal"><span class="pre">&quot;cfa_private&quot;</span></tt> for a
CFA variable or CFA private variable respectively.</p>
<table border="1" class="last docutils">
<colgroup>
<col width="90%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;cfa_variable&quot;</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;cfa_private&quot;</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="cfa-dimensions">
<span id="id2"></span><h2>4.2. cfa_dimensions<a class="headerlink" href="#cfa-dimensions" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">cfa_dimensions</span></tt></dt>
<dd><p class="first">A netCDF property whose value is a string containing the ordered,
space delimited set of the master array&#8217;s dimension names. The
specified dimensions are all defined as netCDF dimensions in the
CFA-netCDF file.</p>
<p>If missing, an empty sting or a string containing only spaces then
the master array is assumed to be scalar.</p>
<table border="1" class="docutils">
<colgroup>
<col width="90%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;time</span> <span class="pre">lat</span> <span class="pre">lon&quot;</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;</span>&nbsp; <span class="pre">&quot;</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="last">The master array&#8217;s dimensions are stored outside of the
<a class="reference internal" href="#cfa-array"><em>cfa_array</em></a> property in order to provide useful information
about the master array without having to decode the <tt class="docutils literal"><span class="pre">cfa_array</span></tt>
string (which may not be possible in all APIs).</p>
</dd>
</dl>
</div>
<div class="section" id="cfa-array">
<span id="id3"></span><h2>4.3. cfa_array<a class="headerlink" href="#cfa-array" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">cfa_array</span></tt></dt>
<dd><p class="first">A netCDF property whose value is a JSON encoded associative array
containing the attributes required for constructing the aggregated
data array.</p>
<p>The <strong>dimensions</strong>, <strong>shape</strong>, <strong>dtype</strong>, <strong>units</strong> and
<strong>calendar</strong> <a class="reference internal" href="framework.html#master-data-array-parameters"><em>master data array parameters</em></a> are specified elsewhere (by
properties of the netCDF CFA variable or inferrable from the netCDF
dimensions in CFA-netCDF file) and so are not required.</p>
<p>The encoded string may be relatively succinct, as many attributes
have well defined default values.</p>
<table border="1" class="docutils">
<colgroup>
<col width="99%" />
<col width="1%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;{'directions':</span> <span class="pre">{'lat':</span> <span class="pre">false,</span> <span class="pre">'lon':</span> <span class="pre">true</span> <span class="pre">},</span> <span class="pre">'Partitions':[{'index':</span> <span class="pre">[0],</span> <span class="pre">'data':</span> <span class="pre">{'file':</span> <span class="pre">'test1.nc',</span> <span class="pre">'shape':</span> <span class="pre">[64,</span> <span class="pre">128],</span> <span class="pre">'ncvar':</span> <span class="pre">'tas',</span> <span class="pre">'varid':</span> <span class="pre">3},</span> <span class="pre">'location':</span> <span class="pre">[[0,</span> <span class="pre">64],</span> <span class="pre">[0,</span> <span class="pre">128]],</span> <span class="pre">'format':</span> <span class="pre">'netCDF'}]}&quot;</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The JSON <em>decoded</em> attributes are described here:</p>
<dl class="docutils" id="directions">
<dt><strong>directions</strong></dt>
<dd><p class="first">An associative array mapping each dimension of the master array
to a direction. Each direction is described as <tt class="docutils literal"><span class="pre">true</span></tt>
(increasing) or <tt class="docutils literal"><span class="pre">false</span></tt> (decreasing).</p>
<p>If the master array is a scalar then a boolean rather than an
associative array is given.</p>
<table border="1" class="docutils">
<colgroup>
<col width="96%" />
<col width="4%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">{'time',</span> <span class="pre">true,</span> <span class="pre">'lat':</span> <span class="pre">false,</span> <span class="pre">'lon',</span> <span class="pre">true}</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">true</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A scalar master array may have an implied direction,
e.g. if there are bounds associated with it or if it
contains a pressure datum.</p>
</div>
</dd>
</dl>
<p id="pmdimensions"><strong>pmdimensions</strong></p>
<blockquote>
<div><p>An ordered list of the dimensions along which the master array
is partitioned. Each of these dimensions is one those specified
by the <a class="reference internal" href="#cfa-dimensions"><em>cfa_dimensions</em></a> property (and is therefore defined
as a netCDF dimension in the CFA-netCDF file).</p>
<p>A shape of <tt class="docutils literal"><span class="pre">[]</span></tt> means that the partition matrix is a scalar,
i.e. the master array comprises a single partition.</p>
<p>If missing then it is assumed that the master array comprises a
single partition.</p>
<table border="1" class="docutils">
<colgroup>
<col width="90%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">['lat',</span> <span class="pre">'time']</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">['height']</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[]</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="docutils" id="pmshape">
<dt><strong>pmshape</strong></dt>
<dd><p class="first">An ordered list containing the number of partitions along each
partitioned dimension of the master array. The sizes correspond
to the <a class="reference internal" href="#pmdimensions"><em>pmdimensions</em></a> list. This is the
shape of the partition matrix.</p>
<p>A shape of <tt class="docutils literal"><span class="pre">[]</span></tt> means that the partition matrix is a scalar,
i.e. the master array comprises a single partition.</p>
<p>If missing then it is assumed that the master array comprises a
single partition.</p>
<table border="1" class="last docutils">
<colgroup>
<col width="83%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[2,</span> <span class="pre">3]</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">[87]</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[]</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="docutils" id="base">
<dt><strong>base</strong></dt>
<dd><p class="first">A string giving the base for relative file names given by
<a class="reference internal" href="#file"><em>file</em></a>. May be an absolute or relative URL or
location on the local system. If it is a relative location then
it assumed to be relative to the local directory or URL base
containing the CFA-netCDF file.</p>
<p>If set then all file names are assumed to have relative
paths. If it is an empty string (<tt class="docutils literal"><span class="pre">''</span></tt>) then the base is taken
as the local directory or URL base containing the CFA-netCDF
file.</p>
<p>If missing then it is assumed that all file names are absolute
paths (local files or URLs).</p>
<table border="1" class="last docutils">
<colgroup>
<col width="93%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'/data/archive'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'../archive/'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'http://archive/files'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">''</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="last docutils" id="partitions">
<dt><strong>Partitions</strong></dt>
<dd><p class="first">A list whose elements define each of the master array&#8217;s
partitions. The order of the list is arbitrary since each
element contains its (possibly multidimensional) index in the
partition matrix.</p>
<table border="1" class="docutils">
<colgroup>
<col width="98%" />
<col width="2%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[{'index':</span> <span class="pre">[0],</span> <span class="pre">'subarray':</span> <span class="pre">{'shape':</span> <span class="pre">[2,</span> <span class="pre">3],</span> <span class="pre">'varid':</span> <span class="pre">0,</span> <span class="pre">'ncvar':</span> <span class="pre">'cfa_1bE8EBC2c3'},</span> <span class="pre">'location':</span> <span class="pre">[[0,</span> <span class="pre">1],</span> <span class="pre">[0,</span> <span class="pre">2]]}]</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="last">Each element of the list is an associative array which specifies
a partition with the <a class="reference internal" href="#partition-attributes"><em>following attributes</em></a>:</p>
</dd>
</dl>
</dd>
</dl>
<div class="section" id="partition-attributes">
<span id="id4"></span><h3>4.3.1. Partition attributes<a class="headerlink" href="#partition-attributes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils" id="index">
<dt><strong>index</strong></dt>
<dd><p class="first">An ordered list of indices specifying the position of the
partition in the partition matrix. The indices correspond to the
<a class="reference internal" href="#pmdimensions"><em>pmdimensions</em></a> list.</p>
<p>An index of <tt class="docutils literal"><span class="pre">[]</span></tt> means that the partition matrix is a scalar,
i.e. the master array comprises a single partition.</p>
<p>If missing then it is assumed that the master array comprises a
single partition.</p>
<table border="1" class="docutils">
<colgroup>
<col width="83%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[0]</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">[2,</span> <span class="pre">1]</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[]</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Indices count from zero.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="location">
<dt><strong>location</strong></dt>
<dd><p class="first">An ordered list of ranges of indices, one for each dimension of
the master data array, which describe the contiguous section of
the master data array spanned by this partition. The ranges
correspond to the <a class="reference internal" href="#cfa-dimensions"><em>cfa_dimensions</em></a> list.</p>
<p>Each range is a two-element list giving a <em>start</em> and <em>stop</em>
index for its dimension.  For example, the range <tt class="docutils literal"><span class="pre">[3,</span> <span class="pre">5]</span></tt> is
equivalent to indices <tt class="docutils literal"><span class="pre">3</span></tt>, <tt class="docutils literal"><span class="pre">4</span></tt> and <tt class="docutils literal"><span class="pre">5</span></tt>; and the range
<tt class="docutils literal"><span class="pre">[6,</span> <span class="pre">6]</span></tt> is equivalent to index <tt class="docutils literal"><span class="pre">6</span></tt>.</p>
<p>If the master data array is a scalar then it is an empty list.</p>
<table border="1" class="docutils">
<colgroup>
<col width="94%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[[2,</span> <span class="pre">2],</span> <span class="pre">[3,</span> <span class="pre">5],</span> <span class="pre">[2,</span> <span class="pre">56]]</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">[[0,</span> <span class="pre">0]]</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[]</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Indices count from zero.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="pdimensions">
<dt><strong>pdimensions</strong> (<em>optional</em>)</dt>
<dd><p class="first">An ordered list of the partition&#8217;s data array dimension
names. The specified dimensions are all defined as netCDF
dimensions in the CFA-netCDF file.</p>
<p>If there are any size 1 dimensions of the partition which are
not spanned by the master array then the partition&#8217;s dimensions
<em>must</em> be specified.</p>
<p>If the partition&#8217;s data array is a scalar then it may be an
empty list.</p>
<p>If missing then it is assumed to be equal to dimensions of
the master array.</p>
<table border="1" class="docutils">
<colgroup>
<col width="93%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">['lon',</span> <span class="pre">'time',</span> <span class="pre">lat']</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">[]</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a partition&#8217;s data array&#8217;s dimensions are not
specified and the sub-array is stored in another file
then it is required <em>only</em> that the sub-array has the
same number of dimensions, with the same physical
meaning and in the same order as the master array. For
example, if the sub-array were in a different netCDF
file, its dimensions may have different names and
sizes relative to the equivalent dimensions in the
CFA-netCDF file.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="pdirections">
<dt><strong>pdirections</strong> (<em>optional</em>)</dt>
<dd><p class="first">An associative array of the partition&#8217;s data array dimension
directions.</p>
<p>Any dimension not specified is assumed to have the same
direction as the corresponding master array dimension. If there
are any size 1 dimensions of the partition which are not spanned
by the master array then their directions <em>must</em> be
specified. The specified dimensions are all defined as netCDF
dimensions in the CFA-netCDF file.</p>
<table border="1" class="docutils">
<colgroup>
<col width="96%" />
<col width="4%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">{'time',</span> <span class="pre">true,</span> <span class="pre">'lat':</span> <span class="pre">true,</span> <span class="pre">'lon',</span> <span class="pre">false}</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A size 1 dimension may have an implied direction,
e.g. if there are bounds associated with it or if it
contains a pressure datum.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="punits">
<dt><strong>punits</strong> (<em>optional</em>)</dt>
<dd><p class="first">A string containing the units of the partition&#8217;s data array.</p>
<p>If missing then it is assumed to be equal to units of the
master array.</p>
<table border="1" class="last docutils">
<colgroup>
<col width="86%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'m</span> <span class="pre">s-1'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">''</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="docutils" id="pcalendar">
<dt><strong>pcalendar</strong> (<em>optional</em>)</dt>
<dd><p class="first">A string containing the calendar of the partition&#8217;s data
array.</p>
<p>If missing then it is assumed to be equal to calendar of the
master array.</p>
<table border="1" class="last docutils">
<colgroup>
<col width="87%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'noleap'</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="docutils" id="part">
<dt><strong>part</strong> (<em>optional</em>)</dt>
<dd><p class="first">A string defining the part of the sub-array which comprises the
partition&#8217;s data array.</p>
<p>For each of the partition&#8217;s dimensions, the string describes the
indices of the sub-array which define the partition&#8217;s data
array. The indices correspond to to the <a class="reference internal" href="#pdimensions"><em>pdimensions</em></a> list.</p>
<p>Indices are contained within square or round brackets. Square
brackets specify a sequence of indices along that
dimension. Round brackets provide a succinct method of
describing a strictly monotonic and regularly spaced sequence of
indices for the dimension via <em>start</em>, <em>stop</em> and <em>step</em>
values. For example, <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">3,</span> <span class="pre">1)</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span>
<span class="pre">3]</span></tt> and <tt class="docutils literal"><span class="pre">(10,</span> <span class="pre">4,</span> <span class="pre">-2)</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">[10,</span> <span class="pre">8,</span> <span class="pre">6,</span> <span class="pre">4]</span></tt>.</p>
<p>If missing or the string <tt class="docutils literal"><span class="pre">'[]'</span></tt> then it is assumed that the
partition&#8217;s data array is the whole of the sub-array.</p>
<table border="1" class="docutils">
<colgroup>
<col width="96%" />
<col width="4%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'[(2,</span> <span class="pre">5,</span> <span class="pre">1),</span> <span class="pre">[1,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">7],</span> <span class="pre">(0,</span> <span class="pre">11,</span> <span class="pre">2)]'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'[[5,</span> <span class="pre">2,</span> <span class="pre">1],</span> <span class="pre">(5,</span> <span class="pre">1,</span> <span class="pre">-4),</span> <span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">1)]'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'[]'</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Indices count from zero.</p>
</div>
</dd>
</dl>
<p id="subarray"><span id="format"></span><strong>subarray</strong></p>
<blockquote>
<div><p>An associative array giving the attributes required to define
the sub-array containing the partition&#8217;s data array. Only a
subset of these will be required, depending on the storage
format of the sub-array.</p>
<table border="1" class="docutils">
<colgroup>
<col width="98%" />
<col width="2%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">{'shape':</span> <span class="pre">[4,</span> <span class="pre">7,</span> <span class="pre">3],</span> <span class="pre">'ncvar':</span> <span class="pre">'cfa_345eA9001D',</span> <span class="pre">'varid':</span> <span class="pre">10}</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">{'file':</span> <span class="pre">'temp.nc',</span> <span class="pre">'ncvar':</span> <span class="pre">'tas',</span> <span class="pre">'shape':</span> <span class="pre">[1200],</span> <span class="pre">'format':</span> <span class="pre">'netCDF',</span> <span class="pre">'varid':</span> <span class="pre">1}</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">{'dtype':</span> <span class="pre">'float',</span> <span class="pre">'file':</span> <span class="pre">'temp.nc',</span> <span class="pre">'ncvar':</span> <span class="pre">'tas',</span> <span class="pre">'shape':</span> <span class="pre">[1200],</span> <span class="pre">'format':</span> <span class="pre">'netCDF',</span> <span class="pre">'varid':</span> <span class="pre">6}</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">{'shape':</span> <span class="pre">[73,</span> <span class="pre">96],</span> <span class="pre">'file':</span> <span class="pre">'../data.pp',</span> <span class="pre">'file_offset':</span> <span class="pre">734826,</span> <span class="pre">'lbpack':</span> <span class="pre">1,</span> <span class="pre">'format':</span> <span class="pre">'PP'}</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">{'shape':</span> <span class="pre">[73,</span> <span class="pre">96],</span> <span class="pre">'file':</span> <span class="pre">'data.pp',</span> <span class="pre">'file_offset':</span> <span class="pre">0,</span> <span class="pre">'scale_factor':</span> <span class="pre">0.01,</span> <span class="pre">'format':</span> <span class="pre">'PP'}</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The keys specify a sub-array with the <a class="reference internal" href="#sub-array-attributes"><em>following attributes</em></a>:</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="sub-array-attributes">
<span id="id5"></span><h3>4.3.2. Sub-array attributes<a class="headerlink" href="#sub-array-attributes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt><strong>format</strong> (<em>optional</em>)</dt>
<dd><p class="first">A string naming the format of the file containing the
partition&#8217;s sub-array.</p>
<p>If missing then the format is assumed to the same as the
CFA-netCDF file.</p>
<table border="1" class="last docutils">
<colgroup>
<col width="86%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'netCDF'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'PP'</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="docutils" id="shape">
<dt><strong>shape</strong></dt>
<dd><p class="first">An ordered list of the sub-array&#8217;s dimension sizes. The sizes
correspond to to the <a class="reference internal" href="#pdimensions"><em>pdimensions</em></a> list.</p>
<table border="1" class="last docutils">
<colgroup>
<col width="87%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[4,</span> <span class="pre">7,</span> <span class="pre">3]</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">[]</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="docutils" id="file">
<dt><strong>file</strong> (<em>optional</em>)</dt>
<dd><p class="first">A string naming the file which contains the sub-array. May be a
local file or a URL.</p>
<p>If <a class="reference internal" href="#base"><em>base</em></a> has been set then the file name is assumed
to be relative to it. If <a class="reference internal" href="#base"><em>base</em></a> is an empty string
(<tt class="docutils literal"><span class="pre">''</span></tt>) then the base is taken as the local directory or URL
base containing the CFA-netCDF file.</p>
<p>If <a class="reference internal" href="#base"><em>base</em></a> has not been set then the file name is
assumed to be an absolute path (local file or URL).</p>
<p>If missing or an empty string (<tt class="docutils literal"><span class="pre">''</span></tt>) then it is assumed to be
the CFA-netCDF file itself.</p>
<table border="1" class="last docutils">
<colgroup>
<col width="94%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'/home/me/file.nc'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'../file2.pp'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'file3.nc'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'http://archive/data/file.nc'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'data/file.nc'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">''</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="docutils" id="dtype">
<dt><strong>dtype</strong> (<em>optional</em>)</dt>
<dd><p class="first">The data type of the sub-array. Any of the <a class="reference external" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#idp4767584">netCDF data type
strings</a>
are allowed.</p>
<p>If missing then the data type of the master array is assumed.</p>
<table border="1" class="last docutils">
<colgroup>
<col width="86%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'double'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'byte'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'char'</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="docutils" id="ncvar">
<dt><strong>ncvar</strong> (<em>optional, but required for netCDF files</em>)</dt>
<dd><p class="first">A string containing the name of the netCDF variable containing
the sub-array.</p>
<table border="1" class="docutils">
<colgroup>
<col width="82%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'tas'</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="last">The attributes <a class="reference internal" href="#ncvar"><em>ncvar</em></a> and <a class="reference internal" href="#varid"><em>varid</em></a>
encode exactly the same information, but are provided to allow
flexibility in the choice of library being used to interpret the
CFA-netCDF file.</p>
</dd>
</dl>
<dl class="docutils" id="varid">
<dt><strong>varid</strong> (<em>optional, but required for netCDF files</em>)</dt>
<dd><p class="first">The integer UNIDATA netCDF interface ID of the variable
containing the sub-array.</p>
<table border="1" class="docutils">
<colgroup>
<col width="80%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">24</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">0</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="last">The attributes <a class="reference internal" href="#ncvar"><em>ncvar</em></a> and <a class="reference internal" href="#varid"><em>varid</em></a>
encode exactly the same information, but are provided to allow
flexibility in the choice of library being used to interpret the
CFA-netCDF file.</p>
</dd>
</dl>
<dl class="docutils" id="file-offset">
<dt><strong>file_offset</strong> (<em>optional, not required for netCDF files</em>)</dt>
<dd><p class="first">The non-negative integer word address of the file where the
sub-array starts. The start of the file is addressed by zero.</p>
<table border="1" class="docutils">
<colgroup>
<col width="85%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">8460364</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="last">This is not required for a sub-array in a netCDF file, since the
sub-array&#8217;s file location is given by the <a class="reference internal" href="#ncvar"><em>ncvar</em></a>
string.</p>
</dd>
</dl>
<dl class="docutils" id="lbpack">
<dt><strong>lbpack</strong> (<em>optional, PP files only</em>)</dt>
<dd><p class="first">The integer <a class="reference external" href="http://badc.nerc.ac.uk/help/formats/pp-format/files/header.txt">PP packing code</a>
of the sub-array.</p>
<p>If missing then it is assumed to be <tt class="docutils literal"><span class="pre">0</span></tt> (unpacked).</p>
<table border="1" class="last docutils">
<colgroup>
<col width="80%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">1</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="docutils" id="endian">
<dt><strong>endian</strong> (<em>optional</em>)</dt>
<dd><p class="first">A string describing the byte order of the sub-array. It takes
values of <tt class="docutils literal"><span class="pre">'big'</span></tt> (most-significant byte first) or
<tt class="docutils literal"><span class="pre">'little'</span></tt> (least-significant byte first).</p>
<p>If missing then it is assumed to be <tt class="docutils literal"><span class="pre">'big'</span></tt> .</p>
<table border="1" class="last docutils">
<colgroup>
<col width="86%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'little'</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'big'</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="docutils">
<dt><strong>_FillValue</strong> (<em>optional, not required for netCDF files</em>)</dt>
<dd><p class="first">The missing data value for the sub-array.</p>
<p>If missing then it is assumed that there is no missing data in
the sub-array.</p>
<table border="1" class="docutils">
<colgroup>
<col width="88%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-1073741824</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="last">For netCDF files, it is assumed that the missing data value will
be accounted for when reading the file.</p>
</dd>
</dl>
<dl class="docutils" id="scale-factor">
<dt><strong>scale_factor</strong> (<em>optional, non-netCDF files only</em>)</dt>
<dd><p class="first">The numeric scale factor (<a class="reference external" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#packed-data">in the CF sense</a>)
of the sub-array.</p>
<table border="1" class="docutils">
<colgroup>
<col width="82%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">100.0</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="last">For netCDF files, it is assumed that the scale factor will be
accounted for when reading the file. Otherwise, if missing then
it is assumed to be <tt class="docutils literal"><span class="pre">1</span></tt> (unscaled).</p>
</dd>
</dl>
<dl class="docutils" id="add-offset">
<dt><strong>add_offset</strong> (<em>optional, non-netCDF files only</em>)</dt>
<dd><p class="first">The numeric additive offset (<a class="reference external" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#packed-data">in the CF sense</a>)
of the sub-array.</p>
<table border="1" class="docutils">
<colgroup>
<col width="83%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Examples</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">273.15</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="last">For netCDF files, it is assumed that the additive factor will be
accounted for when reading the file. Otherwise, if missing then
it is assumed to be <tt class="docutils literal"><span class="pre">0</span></tt> (no additive offset).</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4. CFA-netCDF properties</a><ul>
<li><a class="reference internal" href="#cf-role">4.1. cf_role</a></li>
<li><a class="reference internal" href="#cfa-dimensions">4.2. cfa_dimensions</a></li>
<li><a class="reference internal" href="#cfa-array">4.3. cfa_array</a><ul>
<li><a class="reference internal" href="#partition-attributes">4.3.1. Partition attributes</a></li>
<li><a class="reference internal" href="#sub-array-attributes">4.3.2. Sub-array attributes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="cfa.html"
                        title="previous chapter">3. The CFA-netCDF conventions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/cfa_attributes.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search term.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="cfa.html" title="3. The CFA-netCDF conventions"
             >previous</a> |</li>
  <li><a href="index.html">CFA</a>
      <select onchange="location = this.options[this.selectedIndex].value;">
  <option value="../0.3/index.html"selected>0.3
  <option value="../0.2.2/index.html">0.2.2
  <option value="../0.2.1/index.html">0.2.1
  <option value="../0.2/index.html">0.2
  <option value="../0.1/index.html">0.1
  </select>
  </li>

  
        <li><a href="index.html"></a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
      Last updated on Sep 22, 2013.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>